#!/bin/sh

#Setup optimization flags.  This significantly improves performance.

#On Windows this script does *not* need to be run.  On Windows,
#Makevars.win should simply be used because we can assume that we are
#using the mingw32 compiler

CXX=`"${R_HOME}/bin/R" CMD config CXX`

if [ $CXX = g++ ]; then
 CXXFLAGS="-O3 -ffast-math -funroll-loops -fexpensive-optimizations"
 echo "CXXFLAGS=$CXXFLAGS" > src/Makefile
 cat src/makefile.in >> src/Makefile
fi

#NOTE: On g5 machines with OS X the following PKG_CXXFLAGS generates
#significantly faster code:
#PKG_CXXFLAGS="-fast"
